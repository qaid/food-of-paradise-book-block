var Page=function(){function n(){t("init"),i()}function i(){v.on("click",function(){return h.next(),!1}),b.on("click",function(){return h.prev(),!1}),u.on({swipeleft:function(){return s.data("opened")?!1:(h.next(),!1)},swiperight:function(){return s.data("opened")?!1:(h.prev(),!1)}}),k.on("click",r),p.on("click",function(){var n=$(this),i=n.index(),t=function(){h.jump(i+1)};return f!==i?c(t):c(),!1}),$(window).on("debouncedresize",function(){t("reinit")})}function t(n,i){var i=void 0===i?f:i,t=u.eq(i).children("div.content"),o=t.data("jsp");"init"===n&&void 0===o?t.jScrollPane({verticalGutter:0,hideFocus:!0}):"reinit"===n&&void 0!==o?o.reinitialise():"destroy"===n&&void 0!==o&&o.destroy()}function o(){p.removeClass("menu-toc-current").eq(f).addClass("menu-toc-current")}function e(n){0===f?(v.show(),b.hide()):n?(v.hide(),b.show()):(v.show(),b.show())}function r(){var n=s.data("opened");n?c():d()}function d(){v.hide(),b.hide(),s.addClass("slideRight").data("opened",!0)}function c(n){e(f===l-1),s.removeClass("slideRight").data("opened",!1),n&&(T?s.on(m,function(){$(this).off(m),n.call()}):n.call())}var s=$("#container"),a=$("#bb-bookblock"),u=a.children(),l=u.length,f=0,h=$("#bb-bookblock").bookblock({speed:800,perspective:2e3,shadowSides:.8,shadowFlip:.4,onEndFlip:function(n,i,r){f=i,o(),e(r),t("init"),t("destroy",n)}}),v=$("#bb-nav-next"),b=$("#bb-nav-prev").hide(),p=s.find("ul.menu-toc > li"),k=$("#tblcontents"),w={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},m=w[Modernizr.prefixed("transition")],T=Modernizr.csstransitions;return{init:n}}();